<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head th:insert="~{base :: header}"></head>

<body>

	<div th:insert="~{base :: navbar}"></div>
	<div th:insert="~{base :: modal}"></div>
		
	<div class="container-fluid p-4 body-section">
		<div class="d-flex justify-content-end">
			<span sec:authorize="isAuthenticated()">
				<a th:href="@{'/'}"><button class="btn btn-outline-light border-0 btn-sm"><i class="fa fa-home"></i> Home</button></a>
				<a th:href="@{'/logout'}"><button class="btn btn-outline-light border-0 btn-sm"><i class="fa fa-sign-out"></i> Logout</button></a>
			</span>
		</div>
	
		<div class="container my-3" style="max-width:60rem">
			<h4 class="text-light text-start">List of users</h4>
			<table class="table table-light shadow table-hover text-center">
			  <thead>
			    <tr>
			      <th scope="col">Profile Pic.</th>
			      <th scope="col">Email</th>
			      <th scope="col">Name</th>
			      <th scope="col">Role</th>
			      <th scope="col">Action</th>
			    </tr>
			  </thead>
			  <tbody th:each="user:${users}">
			    <tr>
			   	  <td><img th:src="'/posts/image/'+${user.profilePicture}" class="rounded-circle" style="width:2rem;height:2rem"></td>
			      <td th:text="${user.email}"></td>
			      <td th:text="${user.firstName}+' '+${user.lastName}"></td>
			      <td th:if="${user.roles.size()==2}"><b>ADMIN</b></td>
			      <td th:if="${user.roles.size()==1}"><b>USER</b></td>
			      <td th:if="${user.roles.size()==2}">-</td>
			      <td th:if="${user.roles.size()==1}">
			      	<button class="btn btn-outline-danger btn-sm" data-bs-toggle="modal"
			      	 data-bs-target="#exampleModal" onclick="confirmDelete(this)"
			      	 th:name="@{'/users/delete/'+${user.id}}">Delete</button>
			      </td>
			    </tr>
			  </tbody>
			</table>
			
			<br>
			<h4 class="text-light text-start">List of categories</h4>
			<table class="table table-light shadow table-hover text-center">
			  <thead>
			    <tr>
			      <th scope="col">Category id</th>
			      <th scope="col">Category name</th>
			      <th scope="col">No. of posts</th>
			      <th scope="col">Action</th>
			    </tr>
			  </thead>
			  <tbody th:each="category:${categories}">
			    <tr>
			      <td th:text="${category.id}"></td>
			      <td th:text="${category.categoryName}"></td>
			      <td th:text="${category.posts.size()}"></td>
			      <td>
			      	<button class="btn btn-outline-danger btn-sm" data-bs-toggle="modal"
			      	 data-bs-target="#exampleModal" onclick="confirmDelete(this)"
			      	 th:name="@{'/categories/delete/'+${category.id}}">Delete</button>
			      </td>
			    </tr>
			  </tbody>
			</table>
		</div>
	</div>
	<div th:insert="~{base :: footer}"></div>
	<script src="/js/main.js" type="text/javascript"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3" crossorigin="anonymous"></script>
</body>
</html>